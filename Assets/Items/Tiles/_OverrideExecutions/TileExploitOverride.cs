using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TileExploitOverride : TileOverride {
    public void Execute(CombatCharacter defensiveCharacter, CombatCharacter offensiveCharacter, List<Die> dice, Tile tile) {

        float damage = DieUtility.SumDice(dice);
        foreach (StatusEffect s in defensiveCharacter.ActionFilters) {
            damage *= 1.4f;
        }
        int scaledDamage = (int)damage;
        tile.TileCharges--;

        scaledDamage = (int)ActionFilterUtility.ApplyFiltersOfType(scaledDamage, offensiveCharacter.ActionFilters, FilterType.AttackActor);
        scaledDamage = (int)ActionFilterUtility.ApplyFiltersOfType(scaledDamage, defensiveCharacter.ActionFilters, FilterType.AttackRecipient);

        //Execute the action
        defensiveCharacter.TakeDamage(scaledDamage);
    }
}
